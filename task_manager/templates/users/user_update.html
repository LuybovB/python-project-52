{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<div class="container mt-4">
    <h1 class="display-4">{% trans 'Edit Task' %}</h1>
    <form method="POST" class="task-edit-form">
        {% csrf_token %}
        <div class="form-group">
            {% trans 'Name' as name_label %}
            <label for="id_name">{{ name_label }}</label>
            <input type="text"
                   id="id_name"
                   name="name"
                   class="form-control"
                   placeholder="{% trans 'Name' %}"
                   required
                   value="{{ task.name }}"
                   oninput="setCustomValidity('')">
            {{ form.name.errors }}
        </div>
        <div class="form-group">
            <label for="id_status">{% trans "Status" %}</label>
            <select name="status" id="id_status" class="form-select" required>
                <option value="" disabled>---------</option>
                {% for status in statuses %}
                    <option value="{{ status.id }}" {% if task.status.id == status.id %}selected{% endif %}>
                        {{ status.name }}
                    </option>
                {% endfor %}
            </select>
            {{ form.status.errors }}
        </div>
        <div class="form-group">
            <label for="id_executor">{% trans "Executor" %}</label>
            <select name="executor" id="id_executor" class="form-select">
                <option value="" disabled>---------</option>
                {% for user in users %}
                    <option value="{{ user.id }}" {% if task.executor.id == user.id %}selected{% endif %}>
                        {{ user.get_full_name }}
                    </option>
                {% endfor %}
            </select>
            {{ form.executor.errors }}
        </div>
        <button type="submit" class="btn btn-primary mt-3">{% trans 'Save Changes' %}</button>
    </form>
</div>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/task-edit.css' %}">
{% endblock %}
